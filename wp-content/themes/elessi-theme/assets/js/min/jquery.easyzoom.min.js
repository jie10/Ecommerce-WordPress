function reset_easy_zoom(t){var o=t("body").hasClass("product-zoom")?!0:!1;o&&!/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)&&!iOS&&t(".product-zoom .easyzoom .nasa-disabled-touchstart").length<=0&&(t(".product-zoom .easyzoom").length>0&&t(".product-zoom .easyzoom").each(function(){var o=t(this);if(!t(o).hasClass("nasa-loaded")){if(""===t(o).find("> a").attr("href")){var e=t(o).find("> a").attr("data-o_href");e&&t(o).find("> a").attr("href",e)}t(o).addClass("nasa-loaded")}}),t(".product-zoom .easyzoom").easyZoom())}function check_iOS(){for(var t=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];t.length;)if(navigator.platform===t.pop())return!0;return!1}!function(t,o){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(t){o(t)}):"object"==typeof module&&module.exports?module.exports=t.EasyZoom=o(require("jquery")):t.EasyZoom=o(t.jQuery)}(this,function(t){"use strict";function o(o,e){this.$target=t(o),this.opts=t.extend({},h,e,this.$target.data()),void 0===this.isOpen&&this._init()}var e,i,s,a,r,n,h={loadingNotice:"Loading image",errorNotice:"The image could not be loaded",errorDuration:2500,linkAttribute:"href",preventClicks:!0,beforeShow:t.noop,beforeHide:t.noop,onShow:t.noop,onHide:t.noop,onMove:t.noop};return o.prototype._init=function(){this.$link=this.$target.find("a"),this.$image=this.$target.find("img"),this.$flyout=t('<div class="easyzoom-flyout" />'),this.$notice=t('<div class="easyzoom-notice" />'),this.$target.on({"mousemove.easyzoom touchmove.easyzoom":t.proxy(this._onMove,this),"mouseleave.easyzoom touchend.easyzoom":t.proxy(this._onLeave,this),"mouseenter.easyzoom touchstart.easyzoom":t.proxy(this._onEnter,this)}),this.opts.preventClicks&&this.$target.on("click.easyzoom",function(t){t.preventDefault()})},o.prototype.show=function(t,o){var r=this;if(this.opts.beforeShow.call(this)!==!1){if(!this.isReady)return this._loadImage(this.$link.attr(this.opts.linkAttribute),function(){(r.isMouseOver||!o)&&r.show(t)});this.$target.append(this.$flyout);var n=this.$target.outerWidth(),h=this.$target.outerHeight(),d=this.$flyout.width(),c=this.$flyout.height(),l=this.$zoom.width(),u=this.$zoom.height();e=l-d,i=u-c,0>e&&(e=0),0>i&&(i=0),s=e/n,a=i/h,this.isOpen=!0,this.opts.onShow.call(this),t&&this._move(t)}},o.prototype._onEnter=function(t){var o=t.originalEvent.touches;this.isMouseOver=!0,o&&1!=o.length||(t.preventDefault(),this.show(t,!0))},o.prototype._onMove=function(t){this.isOpen&&(t.preventDefault(),this._move(t))},o.prototype._onLeave=function(){this.isMouseOver=!1,this.isOpen&&this.hide()},o.prototype._onLoad=function(t){t.currentTarget.width&&(this.isReady=!0,this.$notice.detach(),this.$flyout.html(this.$zoom),this.$target.removeClass("is-loading").addClass("is-ready"),t.data.call&&t.data())},o.prototype._onError=function(){var t=this;this.$notice.text(this.opts.errorNotice),this.$target.removeClass("is-loading").addClass("is-error"),this.detachNotice=setTimeout(function(){t.$notice.detach(),t.detachNotice=null},this.opts.errorDuration)},o.prototype._loadImage=function(o,e){var i=new Image;this.$target.addClass("is-loading").append(this.$notice.text(this.opts.loadingNotice)),this.$zoom=t(i).on("error",t.proxy(this._onError,this)).on("load",e,t.proxy(this._onLoad,this)),i.style.position="absolute",i.src=o},o.prototype._move=function(t){if(0===t.type.indexOf("touch")){var o=t.touches||t.originalEvent.touches;r=o[0].pageX,n=o[0].pageY}else r=t.pageX||r,n=t.pageY||n;var h=this.$target.offset(),d=n-h.top,c=r-h.left,l=Math.ceil(d*a),u=Math.ceil(c*s);if(0>u||0>l||u>e||l>i)this.hide();else{var m=-1*l,p=-1*u;this.$zoom.css({top:m,left:p}),this.opts.onMove.call(this,m,p)}},o.prototype.hide=function(){this.isOpen&&this.opts.beforeHide.call(this)!==!1&&(this.$flyout.detach(),this.isOpen=!1,this.opts.onHide.call(this))},o.prototype.swap=function(t,o,e){this.hide(),this.isReady=!1,this.detachNotice&&clearTimeout(this.detachNotice),this.$notice.parent().length&&this.$notice.detach(),this.$target.removeClass("is-loading is-ready is-error"),this.$image.attr({src:t,srcset:Array.isArray(e)?e.join():e}),this.$link.attr(this.opts.linkAttribute,o)},o.prototype.teardown=function(){this.hide(),this.$target.off(".easyzoom").removeClass("is-loading is-ready is-error"),this.detachNotice&&clearTimeout(this.detachNotice),delete this.$link,delete this.$zoom,delete this.$image,delete this.$notice,delete this.$flyout,delete this.isOpen,delete this.isReady},t.fn.easyZoom=function(e){return this.each(function(){var i=t.data(this,"easyZoom");i?void 0===i.isOpen&&i._init():t.data(this,"easyZoom",new o(this,e))})},o});var iOS=check_iOS();jQuery(document).ready(function(t){"use strict";var o=t("body").hasClass("product-zoom")?!0:!1;!o||/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)||iOS||t("body").on("touchstart","*",function(){t(".product-zoom .easyzoom").length>0&&t(".product-zoom .easyzoom").each(function(){var o=t(this);if(!t(o).hasClass("nasa-disabled-touchstart")){var e=t(o).easyZoom(),i=e.data("easyZoom");i.teardown(),t(o).addClass("nasa-disabled-touchstart")}})}),t("body").on("nasa_before_changed_src_main_img",function(){o&&t(".product-zoom .easyzoom").length&&!/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)&&!iOS&&t(".product-zoom .easyzoom .nasa-disabled-touchstart").length<=0&&t(".product-zoom .easyzoom").easyZoom()}),t("body").on("nasa_after_changed_src_main_img",function(e,i,s){var a=!1;if(o&&t(".product-zoom .easyzoom").length&&!/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent)&&!iOS&&t(".product-zoom .easyzoom .nasa-disabled-touchstart").length<=0)var a=t(".product-zoom .easyzoom").data("easyZoom");if(a){a.swap(i,s);var r=t('.main-images .nasa-item-main-image-wrap[data-key="0"] img');t(r).hasClass("jetpack-lazy-image")&&(t(r).attr("src",i),t(r).removeAttr("srcset").removeAttr("data-lazy-src"))}e.preventDefault()}),t("body").on("nasa_changed_gallery_variable_single",function(){reset_easy_zoom(t)}),t("body").on("nasa_product_gallery_remove_crazy",function(){reset_easy_zoom(t)})});